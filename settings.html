<!DOCTYPE html>
<html>
<head>
    <title>__MSG_settingsPageTitle__</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/settings.css">
</head>
<body>
    <div class="settings-container">
        <div class="header">
            <img src="images/banner.png" alt="Banner" class="banner">
            <h1>__MSG_settingsTitle__</h1>
        </div>

        <div id="status"></div>

        <div class="settings-content">
            <div class="setting-group">
                <label>__MSG_blinkoApiUrlLabel__</label>
                <input type="text" id="targetUrl" class="text-input" placeholder="https://your-blinko-domain.com">
                <div class="help-text">__MSG_blinkoApiUrlHelp__</div>
            </div>
            
            <div class="setting-group">
                <label>__MSG_blinkoAuthKeyLabel__</label>
                <div class="input-container">
                    <input type="text" id="authKey" class="sensitive-input text-input" placeholder="your-auth-key">
                    <button class="toggle-visibility" title="__MSG_showHideButton__">üëÅÔ∏è</button>
                </div>
                <button id="fetchAiConfig" class="fetch-button">__MSG_fetchAiConfigButton__</button>
            </div>

            <div class="setting-group">
                <label>__MSG_openaiApiUrlLabel__</label>
                <input type="text" id="modelUrl" class="text-input" placeholder="https://api.openai.com/v1">
            </div>
            
            <div class="setting-group">
                <label>__MSG_apiKeyLabel__</label>
                <div class="input-container">
                    <input type="text" id="apiKey" class="sensitive-input text-input" placeholder="sk-...">
                    <button class="toggle-visibility" title="__MSG_showHideButton__">üëÅÔ∏è</button>
                </div>
            </div>

            <div class="setting-group">
                <label>__MSG_modelNameLabel__</label>
                <input type="text" id="modelName" class="text-input" placeholder="gpt-3.5-turbo">
            </div>

            <div class="setting-group">
                <label>__MSG_temperatureLabel__</label>
                <input type="number" id="temperature" class="text-input" min="0" max="1" step="0.1" value="0.7">
            </div>

            <div class="setting-group">
                <label for="promptTemplateSelector">__MSG_promptTemplateSelectorLabel__</label>
                <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 8px;">
                    <select id="promptTemplateSelector" class="text-input" style="flex-grow: 1; margin-bottom: 0;"></select>
                    <button id="addPromptTemplateBtn" class="fetch-button" title="__MSG_addTemplateButtonTooltip__" style="padding: 8px 12px; min-width: auto;">+</button>
                    <button id="deletePromptTemplateBtn" class="fetch-button secondary" title="__MSG_deleteTemplateButtonTooltip__" style="padding: 8px 12px; min-width: auto;">-</button>
                </div>
            </div>

            <div class="setting-group">
                <label for="promptTemplate">__MSG_promptTemplateContentLabel__</label>
                <textarea id="promptTemplate" class="text-input" placeholder="__MSG_promptTemplatePlaceholder__"></textarea>
            </div>

            <div class="setting-group">
                <h3 style="margin-bottom: 10px; font-size: 16px;">__MSG_domainSpecificTemplatesTitle__</h3>
                <div id="domainMappingsListContainer" style="margin-bottom: 10px; max-height: 150px; overflow-y: auto; border: 1px solid #eee; padding: 8px; border-radius: 8px; background-color: #f9f9f9;">
                    <!-- ÂüüÂêçËßÑÂàôÂàóË°®Â∞ÜÂä®ÊÄÅÂ°´ÂÖÖÂà∞ËøôÈáå -->
                </div>
                <!-- Form for adding/editing a new rule (initially hidden) -->
                <div id="addDomainRuleFormContainer" style="display: none; margin-top: 10px; padding: 12px; border: 1px dashed #ccc; border-radius: 8px;">
                    <label for="newDomainPatternInput" style="display: block; margin-bottom: 4px;">__MSG_domainPatternLabel__</label>
                    <input type="text" id="newDomainPatternInput" class="text-input" placeholder="__MSG_domainPatternPlaceholder__" style="margin-bottom: 10px; padding: 8px;">
                    
                    <label for="domainRuleTemplateSelector" style="display: block; margin-bottom: 4px;">__MSG_selectTemplateForDomainLabel__</label>
                    <select id="domainRuleTemplateSelector" class="text-input" style="margin-bottom: 12px; padding: 8px;"></select>
                    
                    <div style="display: flex; gap: 8px;">
                        <button id="saveDomainRuleBtn" class="fetch-button" style="flex:1;">__MSG_saveRuleButton__</button>
                        <button type="button" id="cancelDomainRuleBtn" class="fetch-button secondary" style="flex:1;">__MSG_cancelRuleButton__</button>
                    </div>
                </div>
                <button id="addDomainRuleBtn" class="fetch-button" style="margin-top: 10px; width: auto; padding: 8px 16px;">__MSG_addDomainRuleButton__</button>
            </div>

            <div class="setting-group">
                <label class="checkbox-container" for="includeSummaryUrl">
                    <span>__MSG_includeSummaryUrlLabel__</span>
                    <div class="toggle-switch" data-checkbox="includeSummaryUrl">
                        <input type="checkbox" id="includeSummaryUrl">
                    </div>
                </label>
                <div class="help-text">__MSG_includeSummaryUrlHelp__</div>
            </div>

            <div class="setting-group">
                <label class="checkbox-container" for="includeSelectionUrl">
                    <span>__MSG_includeSelectionUrlLabel__</span>
                    <div class="toggle-switch" data-checkbox="includeSelectionUrl">
                        <input type="checkbox" id="includeSelectionUrl">
                    </div>
                </label>
            </div>

            <div class="setting-group">
                <label class="checkbox-container" for="includeImageUrl">
                    <span>__MSG_includeImageUrlLabel__</span>
                    <div class="toggle-switch" data-checkbox="includeImageUrl">
                        <input type="checkbox" id="includeImageUrl">
                    </div>
                </label>
            </div>

            <div class="setting-group">
                <label class="checkbox-container" for="includeQuickNoteUrl">
                    <span>__MSG_includeQuickNoteUrlLabel__</span>
                    <div class="toggle-switch" data-checkbox="includeQuickNoteUrl">
                        <input type="checkbox" id="includeQuickNoteUrl">
                    </div>
                </label>
            </div>

            <div class="setting-group">
                <label>__MSG_summaryTagLabel__</label>
                <input type="text" id="summaryTag" class="text-input" placeholder="__MSG_summaryTagPlaceholder__">
            </div>

            <div class="setting-group">
                <label>__MSG_selectionTagLabel__</label>
                <input type="text" id="selectionTag" class="text-input" placeholder="__MSG_selectionTagPlaceholder__">
            </div>

            <div class="setting-group">
                <label>__MSG_imageTagLabel__</label>
                <input type="text" id="imageTag" class="text-input" placeholder="__MSG_imageTagPlaceholder__">
            </div>

            <div class="setting-group">
                <label class="checkbox-container" for="enableFloatingBall">
                    <span>__MSG_enableFloatingBallLabel__</span>
                    <div class="toggle-switch" data-checkbox="enableFloatingBall">
                        <input type="checkbox" id="enableFloatingBall">
                    </div>
                </label>
            </div>

            <div class="setting-group">
                <div class="triple-slider-container">
                    <div class="slider-option-group">
                        <label>__MSG_floatingBallSizeLabel__</label>
                        <div class="triple-slider position-left" data-slider="floatingBallSize">
                            <span class="option-label">__MSG_floatingBallSizeSmall__</span>
                            <span class="option-label">__MSG_floatingBallSizeMedium__</span>
                            <span class="option-label">__MSG_floatingBallSizeLarge__</span>
                            <input type="radio" id="ballSizeSmall" name="floatingBallSize" value="small" style="display: none;">
                            <input type="radio" id="ballSizeMedium" name="floatingBallSize" value="medium" style="display: none;">
                            <input type="radio" id="ballSizeLarge" name="floatingBallSize" value="large" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>

            <div class="setting-group">
                <div class="triple-slider-container">
                    <div class="slider-option-group">
                        <label>__MSG_themeSettingsLabel__</label>
                        <div class="triple-slider position-right" data-slider="theme">
                            <span class="option-label">__MSG_themeLight__</span>
                            <span class="option-label">__MSG_themeDark__</span>
                            <span class="option-label">__MSG_themeSystem__</span>
                            <input type="radio" id="themeLight" name="theme" value="light" style="display: none;">
                            <input type="radio" id="themeDark" name="theme" value="dark" style="display: none;">
                            <input type="radio" id="themeSystem" name="theme" value="system" checked style="display: none;">
                        </div>
                    </div>
                </div>
            </div>
     
            <div class="setting-group">
                <label>__MSG_jinaApiKeyLabel__</label>
                <div class="input-container">
                    <input type="text" id="jinaApiKey" class="sensitive-input text-input" placeholder="your-jina-api-key">
                    <button class="toggle-visibility" title="__MSG_showHideButton__">üëÅÔ∏è</button>
                </div>
            </div>

            <div class="setting-group">
                <label class="checkbox-container" for="useJinaApiKey">
                    <span>__MSG_useJinaApiKeyLabel__</span>
                    <div class="toggle-switch" data-checkbox="useJinaApiKey">
                        <input type="checkbox" id="useJinaApiKey">
                    </div>
                </label>
            </div>

            <div class="setting-group">
                <label class="checkbox-container" for="saveWebImages">
                    <span>__MSG_saveWebImagesLabel__</span>
                    <div class="toggle-switch" data-checkbox="saveWebImages">
                        <input type="checkbox" id="saveWebImages">
                    </div>
                </label>
            </div>

            <div class="setting-group">
                <label>__MSG_extractTagLabel__</label>
                <input type="text" id="extractTag" class="text-input" placeholder="__MSG_extractTagPlaceholder__">
            </div>

            <div class="setting-group">
                <h3 style="margin-bottom: 15px; font-size: 16px;">__MSG_importExportTitle__</h3>
                <div class="settings-actions">
                    <button id="exportSettings" class="fetch-button" style="flex-grow: 1;">__MSG_exportSettingsButton__</button>
                    <button id="importSettings" class="fetch-button secondary" style="flex-grow: 1;">__MSG_importSettingsButton__</button>
                </div>
                <input type="file" id="importFileInput" accept=".json" style="display: none;">
                <div class="help-text">__MSG_importExportHelp__</div>
            </div>

            <div class="settings-actions">
                <button id="resetSettings" class="secondary" style="flex-grow: 1;">__MSG_resetSettingsButton__</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/settings-page.js"></script>
</body>
</html>